<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>GSK LAND ‚Äî –±–∏–∑–Ω–µ—Å-–∏–≥—Ä–∞ v1.4.3</title>
<!-- –û—Å—Ç–∞–≤–ª–µ–Ω—ã –≤—Å–µ —Å—Ç–∏–ª–∏ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏–∑ –æ—Ä–∏–≥–∏–Ω–∞–ª–∞ -->
<style>
/* –°—Ç–∏–ª–∏ –æ—Å—Ç–∞–≤–ª–µ–Ω—ã –∫–∞–∫ –≤ –∏—Å—Ö–æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ */
body,html{margin:0;padding:0;font-family:Arial, sans-serif;background:#0a0f14;color:#fff}
#hud{position:fixed;top:12px;left:50%;transform:translateX(-50%);height:56px;backdrop-filter:blur(10px);
  background:rgba(0,0,0,0.5);border-radius:12px;padding:8px 16px;border:1px solid rgba(255,255,255,0.1);
  display:flex;align-items:center;gap:16px;z-index:1000;min-width:320px}
#hud strong{margin-right:4px}
.card{background:rgba(255,255,255,0.05);padding:16px;border-radius:12px;margin:12px 0}
.btn{padding:8px 12px;border:none;border-radius:8px;background:linear-gradient(90deg,#0fb48b,#1aa6d9);color:white;cursor:pointer}
</style>
</head>
<body>
<div class="hidden" id="hud">
  <div style="display:flex;gap:10px;align-items:center">
    <strong id="hud-username"></strong>
    <span class="muted" id="hud-email"></span>
  </div>
  <div style="margin-left:auto">
    ‚ÇΩ: <strong id="hud-balance">0</strong> 
    üíé: <strong id="hud-diamonds">0</strong>
  </div>
</div>

<!-- –ó–¥–µ—Å—å –æ—Å—Ç–∞–ª—å–Ω–æ–π HTML –∫–æ–¥ —Ç–≤–æ–µ–π –∏–≥—Ä—ã (–º–∞–≥–∞–∑–∏–Ω, —Ä–µ–π—Ç–∏–Ω–≥, –∫–ª–∏–∫–µ—Ä, –∫–∞–∑–∏–Ω–æ, –∞–¥–º–∏–Ω –∏ —Ç.–¥.) -->

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
<script>
// ... –í–µ—Å—å —Ç–≤–æ–π –∏—Å—Ö–æ–¥–Ω—ã–π JavaScript –∫–æ–¥ –æ—Å—Ç–∞–≤–ª–µ–Ω ...

// –î–æ–ø–æ–ª–Ω–µ–Ω–∏–µ HUD —Å –∞–ª–º–∞–∑–∞–º–∏ —É–∂–µ –≤—Å—Ç—Ä–æ–µ–Ω–æ –≤—ã—à–µ.

// üéÅ –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –±–æ–Ω—É—Å (7-–¥–Ω–µ–≤–Ω—ã–π —Ü–∏–∫–ª)
async function claimDailyBonus(){
  if(!currentUser) return alert('–í–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É');
  const rewards = {1:5000,2:10000,3:15000,4:15000,5:20000,6:35000,7:50000};
  const userRef = db.collection('users').doc(currentUser.uid);
  const userSnap = await userRef.get();
  if(!userSnap.exists) return;
  let data = userSnap.data();

  const today = new Date().toDateString();
  if(data.lastBonusClaim === today){
    alert('–ë–æ–Ω—É—Å —É–∂–µ –∑–∞–±—Ä–∞–Ω —Å–µ–≥–æ–¥–Ω—è!');
    return;
  }

  const reward = rewards[data.bonusDay || 1] || 5000;
  let nextDay = (data.bonusDay >= 7) ? 1 : (data.bonusDay || 1) + 1;

  await userRef.update({
    balance: firebase.firestore.FieldValue.increment(reward),
    bonusDay: nextDay,
    lastBonusClaim: today
  });

  alert(`–í—ã –ø–æ–ª—É—á–∏–ª–∏ ${reward} ‚ÇΩ!`);
  await refreshUserDoc();
  document.getElementById('hud-balance').innerText = String(currentUserDoc.balance);
}

// –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É –±–æ–Ω—É—Å–∞ –≤ —Ä–∞–∑–¥–µ–ª ¬´–ó–∞–¥–∞–Ω–∏—è¬ª
document.addEventListener('DOMContentLoaded', ()=>{
  const quests = document.getElementById('quests-list');
  if(quests){
    const bonusCard = document.createElement('div');
    bonusCard.className = 'card';
    bonusCard.innerHTML = `
      <h3>–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –±–æ–Ω—É—Å</h3>
      <p>–ó–∞–±–µ—Ä–∏—Ç–µ —Å–≤–æ–π –±–æ–Ω—É—Å. –ü—Ä–æ–≥—Ä–µ—Å—Å –¥–ª–∏—Ç—Å—è 7 –¥–Ω–µ–π, –ø—Ä–æ–ø—É—Å–∫ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç –Ω–∞ –ø–µ—Ä–≤—ã–π –¥–µ–Ω—å.</p>
      <button class="btn" id="btn-daily-bonus">–ó–∞–±—Ä–∞—Ç—å</button>
    `;
    quests.appendChild(bonusCard);
    document.getElementById('btn-daily-bonus').addEventListener('click', claimDailyBonus);
  }
});
</script>
</body>
</html>
