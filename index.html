<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>GSK LAND ‚Äî –±–∏–∑–Ω–µ—Å-–∏–≥—Ä–∞</title>
  <meta name="description" content="GSK LAND ‚Äî –±–∏–∑–Ω–µ—Å-–∏–≥—Ä–∞. –ú–∞–≥–∞–∑–∏–Ω, –º–æ–∏ –±–∏–∑–Ω–µ—Å—ã, —Ä–µ–π—Ç–∏–Ω–≥, –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å." />
  <style>
    :root{
      --bg:#071018;
      --panel: rgba(255,255,255,0.03);
      --panel-2: rgba(255,255,255,0.02);
      --glass-border: rgba(255,255,255,0.04);
      --accent-start:#0fb48b;
      --accent-end:#1aa6d9;
      --card-radius:18px;
      --muted:#9fb3bf;
      --text:#e8f6f4;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;background: radial-gradient(800px 400px at 10% 10%, rgba(26,166,217,0.06), transparent), radial-gradient(1000px 500px at 90% 80%, rgba(15,180,139,0.06), transparent), var(--bg); color:var(--text)}
    .app{max-width:1100px;margin:64px auto;padding:28px;backdrop-filter: blur(10px) saturate(120%); background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(0,0,0,0.02)); border-radius:24px; border:1px solid var(--glass-border); box-shadow: 0 12px 40px rgba(2,6,23,0.7);}
    header{display:flex;align-items:center;justify-content:space-between;gap:12px}
    h1{margin:0;font-size:22px;letter-spacing:0.4px}
    nav{display:flex;gap:8px}
    .nav-btn{padding:10px 14px;border-radius:12px;background:linear-gradient(180deg,var(--panel),var(--panel-2));border:1px solid var(--glass-border);cursor:pointer;color:var(--text)}
    .nav-btn.active{box-shadow: inset 0 -2px 0 rgba(0,0,0,0.25);}
    .grid{display:grid;grid-template-columns:1fr 360px;gap:18px;margin-top:18px}
    .col{background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(0,0,0,0.03)); padding:18px;border-radius:var(--card-radius); border:1px solid var(--glass-border)}
    .card{padding:12px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(0,0,0,0.02));border:1px solid var(--glass-border);margin-bottom:12px}
    .btn{display:inline-block;padding:8px 12px;border-radius:10px;background:linear-gradient(90deg,var(--accent-start),var(--accent-end));color:white;text-decoration:none;border:none;cursor:pointer}
    .muted{color:var(--muted);font-size:13px}
    .hidden{display:none !important}

    /* –†—É–ª–µ—Ç–∫–∞ */
    .roulette-container {
      position: relative;
      width: 320px;
      margin: 0 auto;
    }
    #roulette-wheel {
      width: 300px;
      height: 300px;
      border-radius: 50%;
      border: 6px solid #0fb48b;
      background: conic-gradient(
        #0fb48b 0deg 60deg,
        #1aa6d9 60deg 120deg,
        #ff6b6b 120deg 180deg,
        #ffa502 180deg 240deg,
        #2ed573 240deg 300deg,
        #3742fa 300deg 360deg
      );
      transition: transform 4s cubic-bezier(0.33, 1, 0.68, 1);
      margin: 0 auto;
      position: relative;
    }
    .roulette-pointer {
      position: absolute;
      bottom: -20px;
      left: 50%;
      transform: translateX(-50%) rotate(180deg);
      width: 0;
      height: 0;
      border-left: 15px solid transparent;
      border-right: 15px solid transparent;
      border-top: 20px solid #fff;
      filter: drop-shadow(0 0 4px rgba(0,0,0,0.7));
    }
    .sector-label {
      position: absolute;
      width: 60px;
      text-align: center;
      left: 50%;
      top: 50%;
      transform-origin: 0 -120px;
      font-size: 14px;
      font-weight: bold;
      color: white;
      text-shadow: 0 0 4px black;
    }
  </style>
</head>
<body>
  <div class="app" id="app">
    <header>
      <div>
        <h1>GSK LAND ‚Äî –±–∏–∑–Ω–µ—Å-–∏–≥—Ä–∞</h1>
        <div class="muted small">–°—Ç–∞–Ω—å —É—Å–ø–µ—à–Ω—ã–º –ø—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç–µ–ª–µ–º!</div>
      </div>
      <nav id="nav">
        <button class="nav-btn active" data-view="home">–ì–ª–∞–≤–Ω–∞—è</button>
        <button class="nav-btn" data-view="shop">–ú–∞–≥–∞–∑–∏–Ω</button>
        <button class="nav-btn" data-view="my">–ú–æ–∏ –±–∏–∑–Ω–µ—Å—ã</button>
        <button class="nav-btn" data-view="rating">–†–µ–π—Ç–∏–Ω–≥</button>
        <button class="nav-btn" data-view="clicker">–ü–æ–¥—Ä–∞–±–æ—Ç–∫–∞</button>
        <button class="nav-btn" data-view="quests">–ó–∞–¥–∞–Ω–∏—è</button>
        <button class="nav-btn" data-view="achievements">–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</button>
        <button class="nav-btn" data-view="promocodes">–ü—Ä–æ–º–æ–∫–æ–¥—ã</button>
        <button class="nav-btn" data-view="news">–ù–æ–≤–æ—Å—Ç–∏</button>
        <button class="nav-btn" data-view="casino">–ö–∞–∑–∏–Ω–æ</button>
      </nav>
    </header>

    <div class="grid">
      <main class="col" id="main">
        <section id="view-home">
          <div class="card">
            <h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ GSK LAND</h2>
            <p class="muted">–≠–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∞—è –∏–≥—Ä–∞ —Å –±–∏–∑–Ω–µ—Å–∞–º–∏ –∏ —Ä–µ–π—Ç–∏–Ω–≥–æ–º.</p>
          </div>
        </section>

        <!-- –ù–æ–≤—ã–π —Ä–∞–∑–¥–µ–ª –ö–∞–∑–∏–Ω–æ -->
        <section id="view-casino" class="hidden">
          <h2>–ö–∞–∑–∏–Ω–æ ‚Äî –†—É–ª–µ—Ç–∫–∞ üé°</h2>
          <div class="card" style="text-align:center">
            <div class="roulette-container">
              <div id="roulette-wheel">
                <div class="sector-label" style="transform: rotate(30deg)">x2</div>
                <div class="sector-label" style="transform: rotate(90deg)">x3</div>
                <div class="sector-label" style="transform: rotate(150deg)">x0</div>
                <div class="sector-label" style="transform: rotate(210deg)">x0.5</div>
                <div class="sector-label" style="transform: rotate(270deg)">x5</div>
                <div class="sector-label" style="transform: rotate(330deg)">x10</div>
              </div>
              <div class="roulette-pointer"></div>
            </div>
            <div style="margin-top:12px">
              <button class="btn" id="roulette-spin">–ö—Ä—É—Ç–∏—Ç—å (—Å—Ç–∞–≤–∫–∞ 1000 ‚ÇΩ)</button>
            </div>
            <div id="roulette-result" style="margin-top:12px;font-size:18px"></div>
          </div>
        </section>
      </main>

      <aside class="col">
        <div class="card">
          <h3>–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h3>
          <div id="notifications-list"></div>
        </div>
      </aside>
    </div>

    <footer>GSK LAND</footer>
  </div>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyAZPTcPsHVAw1RiuOUhM9IXZTSWJdRAW-c",
      authDomain: "gskland2.firebaseapp.com",
      projectId: "gskland2",
      storageBucket: "gskland2.firebasestorage.app",
      messagingSenderId: "615778317319",
      appId: "1:615778317319:web:d875f784f280f5758926a2"
    };
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.firestore();

    const views = {
      home: document.getElementById('view-home'),
      casino: document.getElementById('view-casino')
    };

    document.querySelectorAll('.nav-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        const view = btn.dataset.view;
        Object.values(views).forEach(v => v.classList.add('hidden'));
        if (views[view]) views[view].classList.remove('hidden');
      });
    });

    let currentUser = null;
    let currentUserDoc = null;

    auth.onAuthStateChanged(async (user) => {
      currentUser = user;
      if (user) {
        const userRef = db.collection('users').doc(user.uid);
        const snap = await userRef.get();
        if (snap.exists) currentUserDoc = snap.data();
      }
    });

    const rouletteWheel = document.getElementById("roulette-wheel");
    const rouletteResult = document.getElementById("roulette-result");
    const rouletteSpinBtn = document.getElementById("roulette-spin");

    rouletteSpinBtn.addEventListener("click", async () => {
      if (!currentUser) return alert("–í–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É");

      const bet = 1000;
      if ((currentUserDoc.balance || 0) < bet) return alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤");

      // –ë–ª–æ–∫–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É
      rouletteSpinBtn.disabled = true;

      const sectors = [
        { angle: 30, multiplier: 2 },
        { angle: 90, multiplier: 3 },
        { angle: 150, multiplier: 0 },
        { angle: 210, multiplier: 0.5 },
        { angle: 270, multiplier: 5 },
        { angle: 330, multiplier: 10 }
      ];
      const chosen = sectors[Math.floor(Math.random() * sectors.length)];
      const spinAngle = 360 * 5 + chosen.angle;
      rouletteWheel.style.transform = `rotate(${spinAngle}deg)`;

      setTimeout(async () => {
        const winAmount = Math.floor(bet * chosen.multiplier);
        const userRef = db.collection("users").doc(currentUser.uid);
        await db.runTransaction(async (tx) => {
          const userDoc = await tx.get(userRef);
          if (!userDoc.exists) throw new Error("–ò–≥—Ä–æ–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω");
          const balance = userDoc.data().balance || 0;
          if (balance < bet) throw new Error("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤");
          tx.update(userRef, { balance: firebase.firestore.FieldValue.increment(-bet + winAmount) });
        });

        rouletteResult.innerText = chosen.multiplier === 0
          ? "üíÄ –ü—Ä–æ–∏–≥—Ä—ã—à!"
          : `üéâ –í—ã–∏–≥—Ä—ã—à: ${winAmount} ‚ÇΩ (x${chosen.multiplier})`;

        const snap = await db.collection('users').doc(currentUser.uid).get();
        if (snap.exists) currentUserDoc = snap.data();

        // –†–∞–∑–±–ª–æ–∫–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É
        rouletteSpinBtn.disabled = false;
      }, 4000);
    });
  </script>
</body>
</html>
